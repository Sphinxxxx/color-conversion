<!DOCTYPE html>
<html>
    <head>
        <title>color-conversion</title>
        
        <script src="../dist/color-conversion.min.js"></script>

        <style>
            #combos li {
                display: table;
                background-image: repeating-linear-gradient(90deg, gray 0, gray 12px, white 0, white 24px);
                white-space: nowrap;
            }
            #combos li div {
                display: inline-block;
                width: 14em;
                height: 2em;
                padding: .5em;
                margin: -.25em;
                border: .5em solid white;
                overflow: hidden;
                text-shadow: 1px 1px 0 white;
            }
        </style>
    </head>
    <body>
        <ul id="combos">
            <li>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </li>
            <li>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </li>
            <li>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </li>
            <li>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </li>
        </ul>
        
        <div id="single">
            <input value="rgba(87,45,192,.66667)"/>
            <ul>
                <li></li>
                <li></li>
                <li></li>
            </ul>
        </div>
        
        <script>
            /* global Color */
            Array.from = Array.from || function(list) { return Array.prototype.slice.call(list); };
            function $$(selector, context) {
                return Array.from((context || document).querySelectorAll(selector));
            }
            
            function setColor(el, color) {
                color = color.replace(/(\.\d\d)\d+/g, '$1')
                             .replace(/\,/g, ', ');
                
                el.style.backgroundColor = color;
                el.textContent = color;
            }
            
            
            //Auto-combos:
            const hex = '#' + Math.round(Math.random() * 0xFFFF).toString(16),
                  base = new Color(hex),
                  reps = [
                      hex,
                      base.rgbaString,
                      base.hslaString,
                      base.hex,
                  ];

            $$('#combos li').forEach(function(li, i) {
                const swatches = $$('div', li),
                      color = new Color(reps[i]);
                
                setColor(swatches[0], reps[i]);
                setColor(swatches[1], color.rgbaString);
                setColor(swatches[2], color.hslaString);
                setColor(swatches[3], color.hex);
            });
            
            
            //Custom input:
            const singleInput = $$('#single input')[0],
                  singleConv  = $$('#single li');
            
            singleInput.onchange = function(e) {
                const val = singleInput.value;
                if(!val) { return; }

                const c = new Color(val),
                      reps = [
                          c.rgbaString,
                          c.hslaString,
                          c.hex,
                      ];

                singleConv.forEach((el, i) => setColor(el, reps[i]));

                singleInput.select();
            };
            
            singleInput.onchange();
            
        </script>
    </body>
</html>